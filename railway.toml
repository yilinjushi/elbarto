# Railway 配置文件 - Moltbot 个人 AI 助理
# 部署前请在 Railway 控制台设置以下环境变量：
#   - SETUP_PASSWORD: 设置向导的密码
#   - GEMINI_API_KEY: Google Gemini API 密钥
#   - TELEGRAM_BOT_TOKEN: Telegram Bot Token（从 @BotFather 获取）
#   - PORT: 8080（Railway 通常会自动设置，但建议手动设置）
#   - NODE_OPTIONS: --max-old-space-size=4096（推荐，防止内存不足错误）
#   - CLAWDBOT_STATE_DIR: /data/.clawdbot（如果使用 Volume 挂载到 /data）

[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "sh scripts/railway-start.sh"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# Railway 会自动处理网络配置，应用监听 PORT 环境变量即可
# 如果部署后需要公开访问，在服务 Settings → Networking 中启用 Public Networking
